<%- include('partial/header') %>

<h1 class="mt-4 mb-4 text-center">Galeri <%= kategori %></h1>

<% if (data.length > 0) { %>
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead class="table-dark text-center">
        <tr>
          <th>No</th>
          <th>Nama</th>
          <th>Gambar</th>
          <th>Audio</th>
          <th>Deskripsi</th>
          <% if (loggedIn) { %>
            <th>Aksi</th>
          <% } %>
        </tr>
      </thead>
      <tbody>
        <% data.forEach((item, index) => { %>
          <tr>
            <td class="text-center"><%= index + 1 %></td>
            <td><%= item.nama %></td>
            <td class="text-center">
              <img src="/img/<%= item.image %>" alt="<%= item.nama %>" width="100">
            </td>
            <td class="text-center">
              <audio controls>
                <source src="/audio/<%= item.audio %>" type="audio/mpeg">
                Browser tidak mendukung audio.
              </audio>
            </td>
            <td><%= item.deskripsi || '-' %></td>
            <% if (loggedIn) { %>
              <td class="text-center">
                <a href="/admin/edit/<%= item.id %>" class="btn btn-warning btn-sm">Edit</a>
                <form action="/admin/delete/<%= item.id %>" method="POST" class="d-inline" onsubmit="return confirm('Yakin ingin menghapus data ini?')">
                  <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
              </td>
            <% } %>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
<% } else { %>
  <div class="alert alert-warning text-center" role="alert">
    Tidak ada data pada kategori ini.
  </div>
<% } %>

<%- include('partial/footer') %>
